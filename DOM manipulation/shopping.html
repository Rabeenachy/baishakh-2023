<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <h3>Todo</h3>

    <hr>
    <pre>
            create a form 
            - input field for item
            - input field for quantity // should be numerical 
            - add button
        </pre>
    </hr>

    <pre>
        on click of add button , the items should be displayed one after another along with their quantities.
        create a function that receives input fields values


        HINT:
            - createElement https://www.javascripttutorial.net/dom/manipulating/create-a-dom-element/

                - appendChild https://www.w3schools.com/jsref/met_node_appendchild.asp
                or
                - innerHTML https://www.w3schools.com/jsref/prop_html_innerhtml.asp
            - removeChild
                - https://www.w3schools.com/jsref/met_node_removechild.asp
                - https://www.w3schools.com/jsref/met_element_remove.asp

    </pre>

    <pre>
        first acheive the above 
        then 
        on page refresh the added shopping list gets deleted, prevent that. 
    </pre>
    <form onsubmit="addNewItem(event)">

    <input placeholder="item" id="item" name="item" type="text">
    <input placeholder="quantity" id="quantity" name="quantity" type="number">
    <input type="submit">
</form>


    <table>
        <thead>
            <tr>
                <th>name</th>
                <th>quantity</th>
            </tr>
        </thead>
        <tbody id="list">
            <!-- <tr>
                <td>apple</td>
                <td>11</td>
            </tr>
            <tr>
                <td>samsung</td>
                <td>9</td>
            </tr> -->
        </tbody>
    </table>

    <script>

        console.log("js connected")

        let items = []

        let storedItems = localStorage.getItem("items")
        storedItems = JSON.parse(storedItems)
        items = storedItems

        console.log(items)
        convertItemsToTable()

        


        // console.log(storedItems)
        // console.log([{key:"value"}])


        //     {title: "apple", quantity:"100" },
        //     {title: "kiwi", quantity:"10" }
        // ]


        const addNewItem = (event) => {
            console.log("new item added..")
            event.preventDefault()


        //     items.push({
        //        title: event.target.item.value,
        //        quantity: event.target.quantity.value,
        //     })
            // console.log(event.target.item.value)
            // console.log(event.target.quantity.value)
        //     // console.log("added..");
        //     // document.getElementById("list").innerHTML = 
        //     // `
        //     // <tr>
        //     //     <td>
        //     //         ${event.target.item.value}

        //     //         </td>
        //     //         <td>
        //     //             ${event.target.quantity.value}
        //     //             </td>
        //     //         </tr>
        //     // `

        //     console.log(items)

        //     let liTagsStr = ""

        //     items.forEach(item =>{
        //         liTagsStr = liTagsStr + `


        //         <tr>
        //         <td>
        //             ${item.title}

        //              </td>
        //              <td>
        //              ${item.quantity}
        //                 </td>
        //             </tr>


        //         `
        //     })

        //     document.getElementById("list").innerHTML = liTagsStr

        //     // console.log(str);
        // }
    



        console.log(event.target.item.value)
        console.log(event.target.quantity.value)
      

        let newItem = {
            title:event.target.item.value,
            quantity:event.target.quantity.value,
        }

        items.push(newItem)
        localStorage.setItem("items" , JSON.stringify(items))

        convertItemsToTable()
    }


      
    function convertItemsToTable(){

        let liTagsStr = ""

items.forEach(item =>{
    liTagsStr = liTagsStr + `


    <tr>
    <td>
        ${item.title}

         </td>
         <td>
         ${item.quantity}
            </td>
        </tr>


    `

})

document.getElementById("list").innerHTML = liTagsStr
}

    
    </script>
</body>

</html>